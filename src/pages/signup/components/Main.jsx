import { React, useState } from "react";
import Nav from "../../../components/Nav/Nav";
import instance from "../../../axios";

const Main = () => {
  const [page, setPage] = useState({
    name: "signup",
    title: "CREATE AN ACCOUNT TO GET STARTED",
    formData: {
      formItems: [
        {
          label: "Full Name:",
          type: "text",
          id: "name",
        },
        {
          label: "Email:",
          type: "email",
          id: "email",
        },
        {
          label: "Password:",
          type: "password",
          id: "password",
        },
      ],
    },
    buttonText: "CREATE ACCOUNT",
    paragraphText: (
      <>
        Already have an account?{" "}
        <span className='switch' onClick={switchFunction}>
          Login
        </span>
      </>
    ),
    onSubmit: handleSignUp,
  });

  const [navItems, setNavItems] = useState([
    {
      name: "HOME",
      path: "/",
    },
    {
      name: "CONTACT",
      path: "/contact",
    },
    {
      name: "SIGN UP",
      path: "/signup",
    },
  ]);

  function switchFunction() {
    setPage((prevPage) =>
      prevPage.name === "login"
        ? {
            name: "signup",
            title: "CREATE AN ACCOUNT TO GET STARTED",
            formData: {
              formItems: [
                {
                  label: "Full Name:",
                  type: "text",
                  id: "name",
                },
                {
                  label: "Email:",
                  type: "email",
                  id: "email",
                },
                {
                  label: "Password:",
                  type: "password",
                  id: "password",
                },
              ],
            },
            buttonText: "CREATE ACCOUNT",
            paragraphText: (
              <>
                Already have an account?{" "}
                <span className='switch' onClick={switchFunction}>
                  Login
                </span>
              </>
            ),
            onSubmit: handleSignUp,
          }
        : {
            name: "login",
            title: "LOGIN TO YOUR ACCOUNT",
            formData: {
              formItems: [
                {
                  label: "Email:",
                  type: "email",
                  id: "email",
                },
                {
                  label: "Password:",
                  type: "password",
                  id: "password",
                },
              ],
            },
            buttonText: "LOGIN",
            paragraphText: (
              <>
                Don't have an account?{" "}
                <span className='switch' onClick={switchFunction}>
                  Sign up
                </span>
              </>
            ),
            // onSubmit: handleLogin,
          }
    );
  }

  function handleSignUp(e) {
    e.preventDefault();
    const name = e.currentTarget.name.value;
    const email = e.currentTarget.email.value;
    const password = e.currentTarget.password.value;
    instance
      .post("/signup", { name, email, password })
      .then((response) => {
        console.log(response);
      })
      .catch((e) => console.log(e.response));
  }

  return (
    <main className='signup-main'>
      <div className='signup-hero px-5'>
        <Nav items={navItems} />
        <div className='row gy-5 mt-1 pb-5'>
          <div className='col-sm-6 col-12 align-self-center'>
            <h4 className='section-title mb-5'>{page.title}</h4>
            <svg
              width='300'
              height='287'
              viewBox='0 0 300 287'
              className='img-fluid'
              fill='none'
              xmlns='http://www.w3.org/2000/svg'>
              <path
                d='M175.298 68.024H173.722V24.9374C173.722 21.6625 173.075 18.4197 171.817 15.3941C170.56 12.3685 168.717 9.61939 166.393 7.30374C164.07 4.9881 161.312 3.15126 158.276 1.89813C155.241 0.644986 151.987 8.54896e-05 148.702 0.00024417H57.117C53.8314 0.000191277 50.5779 0.645184 47.5424 1.8984C44.5069 3.15161 41.7488 4.98849 39.4255 7.30417C37.1023 9.61985 35.2593 12.369 34.002 15.3946C32.7447 18.4201 32.0976 21.663 32.0977 24.9378V261.313C32.0977 267.927 34.7336 274.27 39.4255 278.946C44.1175 283.623 50.4811 286.25 57.1166 286.25H148.702C155.337 286.25 161.701 283.623 166.393 278.946C171.085 274.27 173.721 267.927 173.721 261.313V98.6937H175.296L175.298 68.024Z'
                fill='#3F3D56'
              />
              <path
                d='M168.619 23.2669V262.982C168.619 267.997 166.62 272.806 163.063 276.352C159.506 279.898 154.682 281.891 149.651 281.893H56.186C51.1531 281.894 46.3261 279.902 42.7665 276.355C39.2069 272.809 37.2064 267.999 37.2049 262.982V23.2669C37.2064 18.2507 39.2068 13.4404 42.7662 9.89416C46.3256 6.3479 51.1525 4.35605 56.1852 4.35669H67.523C66.9663 5.72125 66.7544 7.20123 66.9059 8.66653C67.0575 10.1318 67.5678 11.5376 68.3921 12.7603C69.2164 13.9829 70.3294 14.9851 71.6332 15.6786C72.9371 16.3721 74.3919 16.7358 75.8698 16.7377H129.156C130.634 16.7358 132.088 16.3721 133.392 15.6786C134.696 14.9851 135.809 13.9829 136.633 12.7603C137.458 11.5376 137.968 10.1318 138.119 8.66653C138.271 7.20123 138.059 5.72125 137.502 4.35669H149.647C154.678 4.35754 159.503 6.34964 163.06 9.89502C166.618 13.4404 168.618 18.2489 168.619 23.2633V23.2669Z'
                fill='white'
              />
              <path
                d='M103.914 119.168C93.2731 119.172 83.066 114.962 75.5383 107.465C68.0106 99.9686 63.7788 89.7984 63.7739 79.1918V79.1563C63.7739 79.0726 63.7739 78.9844 63.7788 78.9006C63.9 56.9902 81.9072 39.1477 103.914 39.1477C109.186 39.1474 114.406 40.182 119.276 42.1924C124.146 44.2028 128.571 47.1496 132.299 50.8646C136.026 54.5796 138.983 58.9901 141.001 63.8441C143.018 68.6982 144.057 73.9008 144.057 79.1549C144.058 84.409 143.02 89.6118 141.003 94.466C138.986 99.3203 136.029 103.731 132.302 107.447C128.575 111.162 124.15 114.109 119.28 116.12C114.41 118.131 109.19 119.166 103.919 119.167H103.914V119.168ZM103.914 39.9895C93.54 40.0126 83.5938 44.1153 76.2368 51.4063C68.8799 58.6972 64.7068 68.5873 64.6241 78.9276C64.6196 79.017 64.6197 79.0887 64.6197 79.1567C64.6187 86.9044 66.9228 94.4784 71.2406 100.921C75.5584 107.363 81.6959 112.385 88.877 115.35C96.0582 118.316 103.96 119.092 111.584 117.582C119.208 116.071 126.211 112.34 131.708 106.862C137.205 101.384 140.948 94.4044 142.465 86.8057C143.982 79.2069 143.204 71.3305 140.23 64.1725C137.255 57.0144 132.218 50.8962 125.755 46.5917C119.292 42.2872 111.694 39.9896 103.921 39.9895H103.914Z'
                fill='#E6E6E6'
              />
              <path
                d='M86.359 78.8164C91.1175 78.8164 94.9749 74.9715 94.9749 70.2286C94.9749 65.4857 91.1175 61.6409 86.359 61.6409C81.6006 61.6409 77.7431 65.4857 77.7431 70.2286C77.7431 74.9715 81.6006 78.8164 86.359 78.8164Z'
                fill='#3F3D56'
              />
              <path
                d='M113.377 96.6915H71.1097C71.0567 96.6922 71.0038 96.688 70.9517 96.679L90.9426 62.1678C91.0645 61.9528 91.2415 61.7739 91.4556 61.6495C91.6696 61.525 91.9129 61.4595 92.1607 61.4595C92.4084 61.4595 92.6518 61.525 92.8658 61.6495C93.0798 61.7739 93.2568 61.9528 93.3788 62.1678L106.794 85.3267L107.437 86.4347L113.377 96.6915Z'
                fill='#FDB095'
              />
              <path
                d='M136.909 96.692H100.353L107.436 86.436L107.946 85.6969L117.177 72.3315C117.34 72.127 117.544 71.9591 117.777 71.8386C118.01 71.7181 118.265 71.6478 118.527 71.6322C118.789 71.6166 119.051 71.6561 119.296 71.7482C119.541 71.8402 119.765 71.9827 119.951 72.1664C119.999 72.2186 120.043 72.2737 120.084 72.3315L136.909 96.692Z'
                fill='#FDB095'
              />
              <path
                d='M145.423 161.233H62.3681C61.9603 161.233 61.5694 161.071 61.2811 160.784C60.9927 160.497 60.8306 160.107 60.8301 159.701V139.166C60.8307 138.76 60.9929 138.37 61.2812 138.083C61.5695 137.795 61.9604 137.634 62.3681 137.633H145.423C145.83 137.634 146.221 137.795 146.509 138.083C146.798 138.37 146.96 138.76 146.96 139.166V159.701C146.96 160.107 146.798 160.497 146.509 160.784C146.221 161.072 145.83 161.233 145.423 161.234V161.233ZM62.3681 138.246C62.1234 138.246 61.8887 138.343 61.7157 138.516C61.5427 138.688 61.4454 138.922 61.4451 139.166V159.701C61.4454 159.945 61.5427 160.179 61.7157 160.351C61.8887 160.524 62.1234 160.621 62.3681 160.621H145.423C145.667 160.621 145.902 160.524 146.075 160.351C146.248 160.179 146.345 159.945 146.345 159.701V139.166C146.345 138.922 146.248 138.688 146.075 138.516C145.902 138.343 145.667 138.246 145.423 138.246H62.3681Z'
                fill='#E6E6E6'
              />
              <path
                d='M73.1341 155.872C76.7017 155.872 79.5939 152.989 79.5939 149.433C79.5939 145.877 76.7017 142.995 73.1341 142.995C69.5665 142.995 66.6744 145.877 66.6744 149.433C66.6744 152.989 69.5665 155.872 73.1341 155.872Z'
                fill='#FDB095'
              />
              <path
                d='M88.0533 145.141C87.7678 145.141 87.4939 145.254 87.292 145.455C87.0901 145.656 86.9767 145.929 86.9767 146.214C86.9767 146.498 87.0901 146.771 87.292 146.973C87.4939 147.174 87.7678 147.287 88.0533 147.287H138.808C138.952 147.292 139.095 147.269 139.229 147.219C139.363 147.169 139.486 147.092 139.59 146.994C139.694 146.896 139.778 146.778 139.835 146.647C139.893 146.516 139.924 146.375 139.926 146.232C139.929 146.089 139.902 145.947 139.849 145.814C139.796 145.682 139.716 145.561 139.615 145.459C139.514 145.358 139.394 145.277 139.262 145.223C139.129 145.168 138.987 145.14 138.844 145.141H88.0533V145.141Z'
                fill='#E6E6E6'
              />
              <path
                d='M88.0533 151.579C87.7678 151.579 87.4939 151.692 87.292 151.893C87.0901 152.095 86.9767 152.368 86.9767 152.652C86.9767 152.937 87.0901 153.21 87.292 153.411C87.4939 153.612 87.7678 153.725 88.0533 153.725H138.808C138.952 153.731 139.095 153.708 139.229 153.657C139.363 153.607 139.486 153.531 139.59 153.432C139.694 153.334 139.778 153.216 139.835 153.085C139.893 152.954 139.924 152.813 139.926 152.67C139.929 152.527 139.902 152.386 139.849 152.253C139.796 152.12 139.716 152 139.615 151.898C139.514 151.796 139.394 151.716 139.262 151.661C139.129 151.606 138.987 151.579 138.844 151.58H88.0533V151.579Z'
                fill='#E6E6E6'
              />
              <path
                d='M145.423 195.573H62.3681C61.9603 195.573 61.5694 195.411 61.2811 195.124C60.9927 194.836 60.8306 194.447 60.8301 194.04V173.506C60.8307 173.099 60.9929 172.71 61.2812 172.422C61.5695 172.135 61.9604 171.973 62.3681 171.973H145.423C145.83 171.973 146.221 172.135 146.509 172.422C146.798 172.71 146.96 173.099 146.96 173.506V194.041C146.96 194.447 146.798 194.836 146.509 195.124C146.221 195.411 145.83 195.573 145.423 195.573ZM62.3681 172.586C62.1234 172.586 61.8887 172.683 61.7157 172.855C61.5427 173.028 61.4454 173.262 61.4451 173.506V194.041C61.4454 194.284 61.5427 194.518 61.7157 194.691C61.8887 194.863 62.1234 194.96 62.3681 194.96H145.423C145.667 194.96 145.902 194.863 146.075 194.691C146.248 194.518 146.345 194.284 146.345 194.041V173.506C146.345 173.262 146.248 173.028 146.075 172.855C145.902 172.683 145.667 172.586 145.423 172.586H62.3681Z'
                fill='#E6E6E6'
              />
              <path
                d='M73.1341 190.211C76.7017 190.211 79.5939 187.329 79.5939 183.773C79.5939 180.217 76.7017 177.334 73.1341 177.334C69.5665 177.334 66.6744 180.217 66.6744 183.773C66.6744 187.329 69.5665 190.211 73.1341 190.211Z'
                fill='#FDB095'
              />
              <path
                d='M88.0533 179.479C87.7678 179.479 87.4939 179.592 87.292 179.793C87.0901 179.995 86.9767 180.268 86.9767 180.552C86.9767 180.837 87.0901 181.11 87.292 181.311C87.4939 181.512 87.7678 181.625 88.0533 181.625H138.808C139.09 181.624 139.36 181.512 139.56 181.315C139.76 181.118 139.874 180.85 139.879 180.57C139.884 180.289 139.778 180.018 139.584 179.814C139.391 179.61 139.125 179.49 138.844 179.479H88.0533V179.479Z'
                fill='#E6E6E6'
              />
              <path
                d='M88.0533 185.919C87.7678 185.919 87.4939 186.032 87.292 186.233C87.0901 186.435 86.9767 186.707 86.9767 186.992C86.9767 187.277 87.0901 187.55 87.292 187.751C87.4939 187.952 87.7678 188.065 88.0533 188.065H138.808C139.09 188.064 139.36 187.952 139.56 187.755C139.76 187.558 139.874 187.29 139.879 187.009C139.884 186.729 139.778 186.458 139.584 186.254C139.391 186.05 139.125 185.93 138.844 185.919H88.0533V185.919Z'
                fill='#E6E6E6'
              />
              <path
                d='M145.423 229.912H62.3681C61.9603 229.912 61.5694 229.75 61.2811 229.463C60.9927 229.176 60.8306 228.786 60.8301 228.38V207.845C60.8307 207.439 60.9929 207.049 61.2812 206.762C61.5695 206.474 61.9604 206.313 62.3681 206.312H145.423C145.83 206.313 146.221 206.474 146.509 206.762C146.798 207.049 146.96 207.439 146.96 207.845V228.38C146.96 228.786 146.798 229.176 146.509 229.463C146.221 229.751 145.83 229.912 145.423 229.913V229.912ZM62.3681 206.925C62.1234 206.925 61.8887 207.022 61.7157 207.195C61.5427 207.367 61.4454 207.601 61.4451 207.845V228.38C61.4454 228.624 61.5427 228.858 61.7157 229.03C61.8887 229.203 62.1234 229.3 62.3681 229.3H145.423C145.667 229.3 145.902 229.203 146.075 229.03C146.248 228.858 146.345 228.624 146.345 228.38V207.845C146.345 207.601 146.248 207.367 146.075 207.195C145.902 207.022 145.667 206.925 145.423 206.925H62.3681Z'
                fill='#E6E6E6'
              />
              <path
                d='M73.1341 224.551C76.7017 224.551 79.5939 221.668 79.5939 218.112C79.5939 214.556 76.7017 211.674 73.1341 211.674C69.5665 211.674 66.6744 214.556 66.6744 218.112C66.6744 221.668 69.5665 224.551 73.1341 224.551Z'
                fill='#FDB095'
              />
              <path
                d='M88.0533 213.82C87.7678 213.82 87.4939 213.933 87.292 214.134C87.0901 214.335 86.9767 214.608 86.9767 214.893C86.9767 215.177 87.0901 215.45 87.292 215.652C87.4939 215.853 87.7678 215.966 88.0533 215.966H138.808C138.952 215.971 139.095 215.948 139.229 215.898C139.363 215.848 139.486 215.771 139.59 215.673C139.694 215.574 139.778 215.456 139.835 215.326C139.893 215.195 139.924 215.054 139.926 214.911C139.929 214.768 139.902 214.626 139.849 214.493C139.796 214.361 139.716 214.24 139.615 214.138C139.514 214.037 139.394 213.956 139.262 213.902C139.129 213.847 138.987 213.819 138.844 213.82H88.0533V213.82Z'
                fill='#E6E6E6'
              />
              <path
                d='M88.0533 220.258C87.7678 220.258 87.4939 220.371 87.292 220.572C87.0901 220.774 86.9767 221.047 86.9767 221.331C86.9767 221.616 87.0901 221.889 87.292 222.09C87.4939 222.291 87.7678 222.404 88.0533 222.404H138.808C138.952 222.41 139.095 222.387 139.229 222.336C139.363 222.286 139.486 222.21 139.59 222.111C139.694 222.013 139.778 221.895 139.835 221.764C139.893 221.633 139.924 221.492 139.926 221.349C139.929 221.206 139.902 221.064 139.849 220.932C139.796 220.799 139.716 220.679 139.615 220.577C139.514 220.475 139.394 220.395 139.262 220.34C139.129 220.285 138.987 220.258 138.844 220.258H88.0533V220.258Z'
                fill='#E6E6E6'
              />
              <path
                d='M212.25 281.615H207.217L204.823 262.269H212.25L212.25 281.615Z'
                fill='#FEB8B8'
              />
              <path
                d='M213.533 286.476H197.307V286.272C197.308 284.602 197.973 283.001 199.157 281.821C200.341 280.641 201.948 279.977 203.622 279.977H213.533L213.533 286.476Z'
                fill='#2F2E41'
              />
              <path
                d='M274.762 278.33L269.863 279.48L263.083 261.194L270.312 259.498L274.762 278.33Z'
                fill='#FEB8B8'
              />
              <path
                d='M277.13 282.77L261.336 286.475L261.289 286.276C261.099 285.471 261.07 284.637 261.203 283.821C261.336 283.005 261.629 282.223 262.066 281.52C262.502 280.817 263.073 280.206 263.746 279.723C264.419 279.24 265.182 278.894 265.989 278.704L275.635 276.44L277.13 282.77Z'
                fill='#2F2E41'
              />
              <path
                d='M211.222 200.016C211.231 199.009 211.531 175.215 218.074 166.219L218.171 166.086L240.974 169.222L240.464 174.216C241.467 175.188 249.356 183.406 251.634 202.864L275.839 267.656L264.587 268.675L231.278 197.946L213.651 274.827H202.499L211.222 200.016Z'
                fill='#2F2E41'
              />
              <path
                d='M215.403 167.097L217.632 155.433C217.195 154.873 215.262 152.185 215.692 149.033C215.973 146.977 217.204 145.174 219.353 143.673L225.131 130.235L225.209 130.19C225.598 129.962 234.797 124.66 239.812 129.662C239.938 129.759 252.285 139.53 247.328 152.707L241.207 171.013L215.403 167.097Z'
                fill='#CCCCCC'
              />
              <path
                d='M207.648 182.877C208.249 182.809 208.827 182.61 209.343 182.294C209.858 181.979 210.298 181.554 210.631 181.051C210.965 180.548 211.183 179.978 211.271 179.381C211.36 178.785 211.316 178.176 211.142 177.599L223.074 169.031L215.931 166.323L205.696 174.874C204.744 175.231 203.956 175.922 203.481 176.818C203.006 177.714 202.876 178.752 203.116 179.737C203.356 180.722 203.949 181.585 204.784 182.164C205.619 182.742 206.638 182.996 207.648 182.878V182.877Z'
                fill='#FEB8B8'
              />
              <path
                d='M209.841 169.017L228.056 154.712L222.641 136.271C222.386 135.397 222.314 134.481 222.429 133.579C222.545 132.677 222.845 131.808 223.312 131.027C223.745 130.29 224.327 129.652 225.021 129.152C225.715 128.653 226.506 128.304 227.344 128.127C230.462 127.469 233.293 129.209 235.756 133.3L235.775 133.337C236.182 134.33 245.672 157.711 238.426 162.711C231.338 167.602 214.902 174.722 214.737 174.794L214.544 174.877L209.841 169.017Z'
                fill='#CCCCCC'
              />
              <path
                d='M234.05 124.799C240.144 124.799 245.084 119.875 245.084 113.8C245.084 107.726 240.144 102.802 234.05 102.802C227.955 102.802 223.015 107.726 223.015 113.8C223.015 119.875 227.955 124.799 234.05 124.799Z'
                fill='#FEB8B8'
              />
              <path
                d='M251.349 109.873C256.74 109.873 261.111 105.517 261.111 100.143C261.111 94.7696 256.74 90.4133 251.349 90.4133C245.958 90.4133 241.587 94.7696 241.587 100.143C241.587 105.517 245.958 109.873 251.349 109.873Z'
                fill='#2F2E41'
              />
              <path
                d='M259.768 108.201C258.505 109.11 257.041 109.705 255.5 109.935C253.959 110.166 252.384 110.025 250.909 109.525C249.433 109.025 248.099 108.18 247.018 107.06C245.938 105.941 245.141 104.58 244.696 103.092C244.864 104.426 245.308 105.712 246 106.867C246.692 108.023 247.616 109.022 248.715 109.803C249.814 110.584 251.064 111.13 252.385 111.405C253.706 111.68 255.07 111.68 256.391 111.403C257.712 111.126 258.961 110.579 260.059 109.797C261.157 109.015 262.081 108.014 262.771 106.858C263.462 105.702 263.904 104.416 264.071 103.081C264.237 101.746 264.124 100.391 263.739 99.1013C263.957 100.834 263.704 102.593 263.005 104.194C262.307 105.795 261.189 107.179 259.768 108.201Z'
                fill='#2F2E41'
              />
              <path
                d='M221.244 108.21C222.948 105.169 223.6 103.901 225.797 102.048C227.741 100.412 230.131 99.9322 232.059 101.482C234.403 100.461 237.021 100.241 239.504 100.856C241.987 101.47 244.197 102.885 245.79 104.88C247.384 106.875 248.271 109.339 248.316 111.889C248.36 114.438 247.558 116.931 246.035 118.98C244.512 121.029 242.352 122.519 239.892 123.219C237.432 123.919 234.809 123.789 232.43 122.85C230.051 121.911 228.05 120.216 226.738 118.027C225.425 115.838 224.875 113.278 225.172 110.745C223.495 110.512 222.92 108.446 221.244 108.21Z'
                fill='#2F2E41'
              />
              <path
                d='M299.216 287H0.783112C0.350337 287 0 286.811 0 286.579C0 286.347 0.350741 286.158 0.783112 286.158H299.216C299.649 286.158 300 286.347 300 286.579C300 286.811 299.649 287 299.216 287Z'
                fill='#E6E6E6'
              />
            </svg>
          </div>
          <div className='col-sm-6 col-12 form-area'>
            <form onSubmit={page.onSubmit}>
              {page.formData.formItems.map((formItem, index) => (
                <div className='form-group' key={index}>
                  <label htmlFor={formItem.id}>{formItem.label}</label>
                  <input
                    type={formItem.type}
                    id={formItem.id}
                    name={formItem.id}
                    required
                    email={formItem.type === "email" ? "true" : "false"}
                  />
                </div>
              ))}
              <button className='mb-4' type='submit'>
                {page.buttonText}
              </button>
              <p>{page.paragraphText}</p>
            </form>
          </div>
        </div>
        <hr />
      </div>
    </main>
  );
};

export default Main;
